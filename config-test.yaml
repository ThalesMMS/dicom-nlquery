llm_path: "../configs/llm-test.yaml"

mcp:
  command: "dicom-mcp"
  config_path: "../configs/dicom.yaml"
  tool_timeout_seconds: 5
  retry:
    max_attempts: 2
    backoff_seconds: [0.1, 0.2]

guardrails:
  study_date_range_default_days: 365
  max_studies_scanned_default: 10
  search_timeout_seconds: 30

search_pipeline:
  enabled: true
  structured_first: true
  max_attempts: 6
  max_rewrites: 5
  series_probe_enabled: true
  series_probe_limit: 20
  server_limit_studies: 50
  server_limit_series: 200
  wildcard_modes: ["contains", "token_chain", "startswith"]
  telemetry:
    enabled: true

lexicon:
  path: "configs/lexicon.en-US.yaml"

rag:
  enable: false
  index_path: "../pacs-rag/data/pacs_terms.sqlite"
  top_k: 5
  min_score: 0.2
  provider: "hash"
  embed_dim: 64

ranking:
  enabled: true
  text_match_weight: 0.7
  recency_weight: 0.3

resolver:
  enabled: false
  require_confirmation: false
  confirmation:
    accept_tokens: ["yes"]
    reject_tokens: ["no"]
    prompt_template: "Mode: {mode}\nSource: {source_node}\nDest: {destination_node}\nFilters:\n{filters}\nConfirm? ({accept_tokens}/{reject_tokens})"
    invalid_response: "Invalid response."
    correction_prompt: "Provide corrected query:"
    cancel_message: "Cancelled."
    max_invalid_responses: 1
    max_rejections: 1
